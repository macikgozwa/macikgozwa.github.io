(()=>{"use strict";var r=1e-6,t="undefined"!=typeof Float32Array?Float32Array:Array;function e(){var r=new t(16);return t!=Float32Array&&(r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[11]=0,r[12]=0,r[13]=0,r[14]=0),r[0]=1,r[5]=1,r[10]=1,r[15]=1,r}function n(r){return r[0]=1,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=1,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=1,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r}function o(r,t,e){var n,o,i,a,u,s,f,c,l,d,h,m,v=e[0],A=e[1],_=e[2];return t===r?(r[12]=t[0]*v+t[4]*A+t[8]*_+t[12],r[13]=t[1]*v+t[5]*A+t[9]*_+t[13],r[14]=t[2]*v+t[6]*A+t[10]*_+t[14],r[15]=t[3]*v+t[7]*A+t[11]*_+t[15]):(n=t[0],o=t[1],i=t[2],a=t[3],u=t[4],s=t[5],f=t[6],c=t[7],l=t[8],d=t[9],h=t[10],m=t[11],r[0]=n,r[1]=o,r[2]=i,r[3]=a,r[4]=u,r[5]=s,r[6]=f,r[7]=c,r[8]=l,r[9]=d,r[10]=h,r[11]=m,r[12]=n*v+u*A+l*_+t[12],r[13]=o*v+s*A+d*_+t[13],r[14]=i*v+f*A+h*_+t[14],r[15]=a*v+c*A+m*_+t[15]),r}function i(r,t,e){var n=e[0],o=e[1],i=e[2];return r[0]=t[0]*n,r[1]=t[1]*n,r[2]=t[2]*n,r[3]=t[3]*n,r[4]=t[4]*o,r[5]=t[5]*o,r[6]=t[6]*o,r[7]=t[7]*o,r[8]=t[8]*i,r[9]=t[9]*i,r[10]=t[10]*i,r[11]=t[11]*i,r[12]=t[12],r[13]=t[13],r[14]=t[14],r[15]=t[15],r}function a(t,e,n,o){var i,a,u,s,f,c,l,d,h,m,v,A,_,g,R,E,p,x,T,M,b,P,F,w,S=o[0],y=o[1],U=o[2],B=Math.hypot(S,y,U);return B<r?null:(S*=B=1/B,y*=B,U*=B,i=Math.sin(n),u=1-(a=Math.cos(n)),s=e[0],f=e[1],c=e[2],l=e[3],d=e[4],h=e[5],m=e[6],v=e[7],A=e[8],_=e[9],g=e[10],R=e[11],E=S*S*u+a,p=y*S*u+U*i,x=U*S*u-y*i,T=S*y*u-U*i,M=y*y*u+a,b=U*y*u+S*i,P=S*U*u+y*i,F=y*U*u-S*i,w=U*U*u+a,t[0]=s*E+d*p+A*x,t[1]=f*E+h*p+_*x,t[2]=c*E+m*p+g*x,t[3]=l*E+v*p+R*x,t[4]=s*T+d*M+A*b,t[5]=f*T+h*M+_*b,t[6]=c*T+m*M+g*b,t[7]=l*T+v*M+R*b,t[8]=s*P+d*F+A*w,t[9]=f*P+h*F+_*w,t[10]=c*P+m*F+g*w,t[11]=l*P+v*F+R*w,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)}Math.random,Math.PI,Math.hypot||(Math.hypot=function(){for(var r=0,t=arguments.length;t--;)r+=arguments[t]*arguments[t];return Math.sqrt(r)});var u=function(r,t,e,n,o){var i,a=1/Math.tan(t/2);return r[0]=a/e,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=a,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[11]=-1,r[12]=0,r[13]=0,r[15]=0,null!=o&&o!==1/0?(i=1/(n-o),r[10]=(o+n)*i,r[14]=2*o*n*i):(r[10]=-1,r[14]=-2*n),r};function s(){var r=new t(3);return t!=Float32Array&&(r[0]=0,r[1]=0,r[2]=0),r}function f(r,t){(null==t||t>r.length)&&(t=r.length);for(var e=0,n=Array(t);e<t;e++)n[e]=r[e];return n}function c(r,t,e){for(var n=[],o=[],i=[],a=[],u=0;u<=t;u++)for(var s=u*Math.PI/t,f=Math.sin(s),c=Math.cos(s),l=0;l<=e;l++){var d=2*l*Math.PI/e,h=Math.sin(d),m=Math.cos(d)*f,v=c,A=h*f,_=1-l/e,g=1-u/t;o.push(m,v,A),n.push(r*m,r*v,r*A),i.push(_,g)}for(var R=0;R<t;R++)for(var E=0;E<=e;E++){var p=R*(e+1)+E,x=p+e+1;a.push(p,x,p+1),a.push(x,x+1,p+1)}return{vertices:new Float32Array(n),normals:new Float32Array(o),texCoords:new Float32Array(i),indices:new Uint16Array(a)}}function l(r){return!(r&r-1)}s(),window.onload=function(){var d=document.getElementById("webgl-canvas");function h(){d.width=window.innerWidth,d.height=window.innerHeight}h(),window.addEventListener("resize",(function(){h(),u(rr,Math.PI/4,d.width/d.height,.1,100),m.useProgram(_),m.uniformMatrix4fv(Y,!1,rr),m.useProgram(E),m.uniformMatrix4fv(q,!1,rr),m.viewport(0,0,d.width,d.height)}));var m=d.getContext("webgl");if(m){var v=m.createShader(m.VERTEX_SHADER);m.shaderSource(v,"\n        attribute vec4 a_Position;\n        attribute vec3 a_Normal;\n        attribute vec2 a_TexCoord;\n        \n        uniform mat4 u_ModelMatrix;\n        uniform mat4 u_ViewMatrix;\n        uniform mat4 u_ProjectionMatrix;\n        \n        varying vec3 v_Normal;\n        varying vec3 v_WorldPosition;\n        varying vec2 v_TexCoord;\n        \n        void main() {\n            // Calculate world position\n            vec4 worldPosition = u_ModelMatrix * a_Position;\n            v_WorldPosition = worldPosition.xyz;\n            \n            // Transform normal to world space\n            mat3 normalMatrix = mat3(u_ModelMatrix);\n            v_Normal = normalize(normalMatrix * a_Normal);\n            \n            // Pass texture coordinates to the fragment shader\n            v_TexCoord = a_TexCoord;\n            \n            // Transform position to clip space\n            gl_Position = u_ProjectionMatrix * u_ViewMatrix * worldPosition;\n        }\n    "),m.compileShader(v);var A=m.createShader(m.FRAGMENT_SHADER);m.shaderSource(A,"\n        precision mediump float;\n        \n        uniform vec4 u_Color;\n        uniform vec3 u_LightPosition;\n        uniform vec3 u_ViewPosition;\n        uniform bool u_IsLightSource;\n        uniform sampler2D u_Texture;\n        uniform bool u_UseTexture;\n        \n        varying vec3 v_Normal;\n        varying vec3 v_WorldPosition;\n        varying vec2 v_TexCoord;\n        \n        void main() {\n            vec4 texColor;\n            \n            if (u_UseTexture) {\n                texColor = texture2D(u_Texture, v_TexCoord);\n            } else {\n                texColor = u_Color;\n            }\n            \n            if (u_IsLightSource) {\n                // The sun emits light and does not receive lighting\n                // Make the sun appear brighter by enhancing its texture color\n                gl_FragColor = texColor * 1.2;\n            } else {\n                // Calculate lighting for planets\n                vec3 normal = normalize(v_Normal);\n                vec3 lightDirection = normalize(u_LightPosition - v_WorldPosition);\n                \n                // Calculate diffuse lighting with increased intensity (1.2 instead of 0.8)\n                float diffuse = max(dot(normal, lightDirection), 0.0);\n                \n                // Add specular highlights for more realistic lighting\n                vec3 viewDirection = normalize(u_ViewPosition - v_WorldPosition);\n                vec3 reflectDirection = reflect(-lightDirection, normal);\n                float specular = pow(max(dot(viewDirection, reflectDirection), 0.0), 32.0) * 0.5;\n                \n                // Apply enhanced lighting to color with a small ambient term to prevent complete darkness\n                vec3 litColor = texColor.rgb * (diffuse * 1.2 + 0.15) + specular;\n                gl_FragColor = vec4(litColor, texColor.a);\n            }\n        }\n    "),m.compileShader(A);var _=m.createProgram();m.attachShader(_,v),m.attachShader(_,A),m.linkProgram(_);var g=m.createShader(m.VERTEX_SHADER);m.shaderSource(g,"\n        attribute vec4 a_Position;\n        attribute float a_Alpha;\n        uniform mat4 u_ViewMatrix;\n        uniform mat4 u_ProjectionMatrix;\n        varying float v_Alpha;\n        void main() {\n            gl_Position = u_ProjectionMatrix * u_ViewMatrix * a_Position;\n            v_Alpha = a_Alpha;\n        }\n    "),m.compileShader(g);var R=m.createShader(m.FRAGMENT_SHADER);m.shaderSource(R,"\n        precision mediump float;\n        uniform vec4 u_Color;\n        varying float v_Alpha;\n        void main() {\n            gl_FragColor = vec4(u_Color.rgb, u_Color.a * v_Alpha);\n        }\n    "),m.compileShader(R);var E=m.createProgram();m.attachShader(E,g),m.attachShader(E,R),m.linkProgram(E);var p=[{name:"Sun",radius:.5,distance:0,color:[1,1,0,1],rotationSpeed:_r(27),orbitSpeed:0,trail:[],showTrail:!1,texturePath:"images/textures/sun.png"},{name:"Mercury",radius:.05,distance:.8,color:[.8,.8,.8,1],rotationSpeed:_r(58.6),orbitSpeed:gr(.24),trail:[],showTrail:!0,texturePath:"images/textures/mercury.png"},{name:"Venus",radius:.08,distance:1.2,color:[.9,.7,.4,1],rotationSpeed:-1*_r(243),orbitSpeed:gr(.62),trail:[],showTrail:!0,texturePath:"images/textures/venus.png"},{name:"Earth",radius:.09,distance:1.5,color:[0,.5,1,1],rotationSpeed:_r(1),orbitSpeed:gr(1),trail:[],showTrail:!0,texturePath:"images/textures/earth.png"},{name:"Mars",radius:.07,distance:1.8,color:[1,.3,0,1],rotationSpeed:_r(1.03),orbitSpeed:gr(1.88),trail:[],showTrail:!0,texturePath:"images/textures/mars.png"},{name:"Jupiter",radius:.2,distance:2.5,color:[.9,.7,.5,1],rotationSpeed:_r(.41),orbitSpeed:gr(11.86),trail:[],showTrail:!0,texturePath:"images/textures/jupiter.png"},{name:"Saturn",radius:.17,distance:3,color:[.9,.8,.6,1],rotationSpeed:_r(.44),orbitSpeed:gr(29.46),trail:[],showTrail:!0,texturePath:"images/textures/saturn.png"},{name:"Uranus",radius:.12,distance:3.5,color:[.5,.8,.9,1],rotationSpeed:_r(.72),orbitSpeed:gr(84.01),trail:[],showTrail:!0,texturePath:"images/textures/uranus.png"},{name:"Neptune",radius:.11,distance:3.9,color:[0,0,.8,1],rotationSpeed:_r(.67),orbitSpeed:gr(164.8),trail:[],showTrail:!0,texturePath:"images/textures/neptune.png"},{name:"Hunter",radius:.05,distance:7,color:[.7,.7,.7,1],rotationSpeed:0,orbitSpeed:0,trail:[],showTrail:!1}],x=0,T=c(1,30,30),M=m.createBuffer();m.bindBuffer(m.ARRAY_BUFFER,M),m.bufferData(m.ARRAY_BUFFER,T.vertices,m.STATIC_DRAW);var b=m.createBuffer();m.bindBuffer(m.ARRAY_BUFFER,b),m.bufferData(m.ARRAY_BUFFER,T.normals,m.STATIC_DRAW);var P=m.createBuffer();m.bindBuffer(m.ARRAY_BUFFER,P),m.bufferData(m.ARRAY_BUFFER,T.texCoords,m.STATIC_DRAW);var F=m.createBuffer();m.bindBuffer(m.ELEMENT_ARRAY_BUFFER,F),m.bufferData(m.ELEMENT_ARRAY_BUFFER,T.indices,m.STATIC_DRAW);var w=c(1,10,10),S=m.createBuffer();m.bindBuffer(m.ARRAY_BUFFER,S),m.bufferData(m.ARRAY_BUFFER,w.vertices,m.STATIC_DRAW);var y=m.createBuffer();m.bindBuffer(m.ARRAY_BUFFER,y),m.bufferData(m.ARRAY_BUFFER,w.normals,m.STATIC_DRAW);var U=m.createBuffer();m.bindBuffer(m.ARRAY_BUFFER,U),m.bufferData(m.ARRAY_BUFFER,w.texCoords,m.STATIC_DRAW);var B=m.createBuffer();m.bindBuffer(m.ELEMENT_ARRAY_BUFFER,B),m.bufferData(m.ELEMENT_ARRAY_BUFFER,w.indices,m.STATIC_DRAW),m.useProgram(_);var L=m.getAttribLocation(_,"a_Position"),D=m.getAttribLocation(_,"a_Normal"),C=m.getAttribLocation(_,"a_TexCoord"),I=m.getUniformLocation(_,"u_ModelMatrix"),N=m.getUniformLocation(_,"u_ViewMatrix"),Y=m.getUniformLocation(_,"u_ProjectionMatrix"),V=m.getUniformLocation(_,"u_Color"),W=m.getUniformLocation(_,"u_LightPosition"),O=m.getUniformLocation(_,"u_ViewPosition"),k=m.getUniformLocation(_,"u_IsLightSource"),H=m.getUniformLocation(_,"u_Texture"),X=m.getUniformLocation(_,"u_UseTexture");m.useProgram(E);var G=m.getAttribLocation(E,"a_Position"),j=m.getAttribLocation(E,"a_Alpha"),z=m.getUniformLocation(E,"u_ViewMatrix"),q=m.getUniformLocation(E,"u_ProjectionMatrix"),J=m.getUniformLocation(E,"u_Color"),$=m.createBuffer(),K=m.createBuffer(),Q=e(),Z=e(),rr=e();u(rr,Math.PI/4,d.width/d.height,.1,100),m.viewport(0,0,d.width,d.height);var tr={};p.forEach((function(r){r.texturePath&&(console.log("Loading texture for ".concat(r.name,":"),r.texturePath),tr[r.name]=function(r,t){var e=r.createTexture();r.bindTexture(r.TEXTURE_2D,e);var n=r.RGBA,o=r.RGBA,i=r.UNSIGNED_BYTE,a=new Uint8Array([0,0,255,255]);r.texImage2D(r.TEXTURE_2D,0,n,1,1,0,o,i,a);var u=new Image;return u.onerror=function(r){console.error("Error loading texture:",t,r)},u.onload=function(){console.log("Texture loaded successfully:",t),r.bindTexture(r.TEXTURE_2D,e),r.texImage2D(r.TEXTURE_2D,0,n,o,i,u),l(u.width)&&l(u.height)?r.generateMipmap(r.TEXTURE_2D):(r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.LINEAR))},u.src=t,console.log("Attempting to load texture:",t),e}(m,r.texturePath))}));var er=Math.PI/4,nr=20*Math.PI/180,or=er+Math.PI,ir=-nr,ar=Math.PI/2-.1,ur=!1;document.addEventListener("pointerlockchange",(function(){ur=document.pointerLockElement===d})),d.addEventListener("click",(function(){ur||d.requestPointerLock()})),document.addEventListener("mousemove",(function(r){ur&&(or-=.002*r.movementX,ir-=.002*r.movementY,ir=Math.max(-ar,Math.min(ar,ir)))}));var sr={ArrowLeft:!1,ArrowRight:!1,z:!1},fr=Math.PI/4,cr=Math.PI/8,lr=fr,dr=fr;window.addEventListener("keydown",(function(r){sr.hasOwnProperty(r.key)&&(sr[r.key]=!0,"z"===r.key&&(dr=cr))})),window.addEventListener("keyup",(function(r){sr.hasOwnProperty(r.key)&&(sr[r.key]=!1,"z"===r.key&&(dr=fr))}));var hr=[1,.6,.2,1],mr=[],vr=2*gr(1);d.addEventListener("click",(function(r){if(0===r.button&&ur){var t=p.find((function(r){return"Hunter"===r.name})).distance,e=Math.sin(er)*t,n=Math.cos(er)*t,o=e,i=-n*Math.sin(nr),a=n*Math.cos(nr),u=Rr(),s=o+.2*u[0],f=i+.2*u[1],c=a+.2*u[2];mr.push({position:[s,f,c],velocity:[u[0]*vr,u[1]*vr,u[2]*vr],radius:.05,color:hr,isLightSource:!0}),console.log("Meteor fired in direction:",u)}}));var Ar=0;!function e(){Ar+=.01,x++;var c=sr.ArrowLeft||sr.ArrowRight;sr.ArrowRight&&(er-=.05),sr.ArrowLeft&&(er+=.05),Math.abs(lr-dr)>.001&&(u(rr,lr+=.1*(dr-lr),d.width/d.height,.1,100),m.useProgram(_),m.uniformMatrix4fv(Y,!1,rr),m.useProgram(E),m.uniformMatrix4fv(q,!1,rr)),m.clearColor(0,0,0,1),m.clear(m.COLOR_BUFFER_BIT|m.DEPTH_BUFFER_BIT),m.enable(m.DEPTH_TEST),m.enable(m.BLEND),m.blendFunc(m.SRC_ALPHA,m.ONE_MINUS_SRC_ALPHA);var l,h,v,A,g=p.find((function(r){return"Hunter"===r.name})).distance,R=Math.sin(er)*g,ar=Math.cos(er)*g,ur=R,fr=-ar*Math.sin(nr),cr=ar*Math.cos(nr),hr=[ur,fr,cr];if(c){l=[0,0,0];var vr=s();v=[0,0,0],A=hr,(h=vr)[0]=v[0]-A[0],h[1]=v[1]-A[1],h[2]=v[2]-A[2],function(r,t){var e=t[0],n=t[1],o=t[2],i=e*e+n*n+o*o;i>0&&(i=1/Math.sqrt(i)),r[0]=t[0]*i,r[1]=t[1]*i,r[2]=t[2]*i}(vr,vr),or=Math.atan2(-vr[0],-vr[2]);var _r=Math.sqrt(vr[0]*vr[0]+vr[2]*vr[2]);ir=Math.atan2(vr[1],_r)}else{var gr=Rr();l=[ur+gr[0],fr+gr[1],cr+gr[2]]}!function(t,e,o,i){var a,u,s,f,c,l,d,h,m,v,A=e[0],_=e[1],g=e[2],R=i[0],E=i[1],p=i[2],x=o[0],T=o[1],M=o[2];Math.abs(A-x)<r&&Math.abs(_-T)<r&&Math.abs(g-M)<r?n(t):(d=A-x,h=_-T,m=g-M,a=E*(m*=v=1/Math.hypot(d,h,m))-p*(h*=v),u=p*(d*=v)-R*m,s=R*h-E*d,(v=Math.hypot(a,u,s))?(a*=v=1/v,u*=v,s*=v):(a=0,u=0,s=0),f=h*s-m*u,c=m*a-d*s,l=d*u-h*a,(v=Math.hypot(f,c,l))?(f*=v=1/v,c*=v,l*=v):(f=0,c=0,l=0),t[0]=a,t[1]=f,t[2]=d,t[3]=0,t[4]=u,t[5]=c,t[6]=h,t[7]=0,t[8]=s,t[9]=l,t[10]=m,t[11]=0,t[12]=-(a*A+u*_+s*g),t[13]=-(f*A+c*_+l*g),t[14]=-(d*A+h*_+m*g),t[15]=1)}(Z,hr,l,[0,1,0]),m.useProgram(_),m.uniformMatrix4fv(N,!1,Z),m.uniformMatrix4fv(Y,!1,rr),m.uniform3f(O,hr[0],hr[1],hr[2]),m.uniform3f(W,0,0,0),m.useProgram(_),m.uniformMatrix4fv(N,!1,Z),m.uniformMatrix4fv(Y,!1,rr),m.uniform3f(O,ur,fr,cr),m.uniform3f(W,0,0,0),m.bindBuffer(m.ARRAY_BUFFER,M),m.vertexAttribPointer(L,3,m.FLOAT,!1,0,0),m.enableVertexAttribArray(L),m.bindBuffer(m.ARRAY_BUFFER,b),m.vertexAttribPointer(D,3,m.FLOAT,!1,0,0),m.enableVertexAttribArray(D),m.bindBuffer(m.ARRAY_BUFFER,P),m.vertexAttribPointer(C,2,m.FLOAT,!1,0,0),m.enableVertexAttribArray(C),m.bindBuffer(m.ELEMENT_ARRAY_BUFFER,F),m.activeTexture(m.TEXTURE0),m.uniform1i(H,0),p.forEach((function(r){if("Hunter"!==r.name){if(n(Q),m.uniform1i(k,"Sun"===r.name?1:0),tr[r.name]?(m.bindTexture(m.TEXTURE_2D,tr[r.name]),m.uniform1i(X,1)):m.uniform1i(X,0),"Sun"!==r.name){if(a(Q,Q,Ar*r.orbitSpeed,[0,1,0]),o(Q,Q,[r.distance,0,0]),r.showTrail&&x%3==0){var e=(s=Q,(f=new t(16))[0]=s[0],f[1]=s[1],f[2]=s[2],f[3]=s[3],f[4]=s[4],f[5]=s[5],f[6]=s[6],f[7]=s[7],f[8]=s[8],f[9]=s[9],f[10]=s[10],f[11]=s[11],f[12]=s[12],f[13]=s[13],f[14]=s[14],f[15]=s[15],f),u=[e[12],e[13],e[14],1];r.trail.push({position:u,age:0}),r.trail.length>100&&r.trail.shift()}r.trail.forEach((function(r){return r.age+=1}))}var s,f;a(Q,Q,Ar*r.rotationSpeed,[0,1,0]),i(Q,Q,[r.radius,r.radius,r.radius]),m.uniformMatrix4fv(I,!1,Q),m.uniform4fv(V,r.color),m.drawElements(m.TRIANGLES,T.indices.length,m.UNSIGNED_SHORT,0)}})),m.useProgram(E),m.uniformMatrix4fv(z,!1,Z),m.uniformMatrix4fv(q,!1,rr),p.forEach((function(r){if(r.showTrail&&!(r.trail.length<2)){for(var t=[],e=[],n=0;n<r.trail.length;n++){var o=r.trail[n];t.push.apply(t,function(r){if(Array.isArray(r))return f(r)}(a=o.position)||function(r){if("undefined"!=typeof Symbol&&null!=r[Symbol.iterator]||null!=r["@@iterator"])return Array.from(r)}(a)||function(r,t){if(r){if("string"==typeof r)return f(r,t);var e={}.toString.call(r).slice(8,-1);return"Object"===e&&r.constructor&&(e=r.constructor.name),"Map"===e||"Set"===e?Array.from(r):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?f(r,t):void 0}}(a)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}());var i=Math.max(0,1-o.age/150);e.push(i)}m.bindBuffer(m.ARRAY_BUFFER,$),m.bufferData(m.ARRAY_BUFFER,new Float32Array(t),m.DYNAMIC_DRAW),m.vertexAttribPointer(G,4,m.FLOAT,!1,0,0),m.enableVertexAttribArray(G),m.bindBuffer(m.ARRAY_BUFFER,K),m.bufferData(m.ARRAY_BUFFER,new Float32Array(e),m.DYNAMIC_DRAW),m.vertexAttribPointer(j,1,m.FLOAT,!1,0,0),m.enableVertexAttribArray(j),m.uniform4fv(J,r.color),m.drawArrays(m.LINE_STRIP,0,r.trail.length)}var a}));for(var Er=mr.length-1;Er>=0;Er--){var pr=mr[Er];pr.position[0]+=.01*pr.velocity[0],pr.position[1]+=.01*pr.velocity[1],pr.position[2]+=.01*pr.velocity[2],Math.sqrt(pr.position[0]*pr.position[0]+pr.position[1]*pr.position[1]+pr.position[2]*pr.position[2])>p.find((function(r){return"Hunter"===r.name})).distance&&mr.splice(Er,1)}m.useProgram(_),m.bindBuffer(m.ARRAY_BUFFER,S),m.vertexAttribPointer(L,3,m.FLOAT,!1,0,0),m.enableVertexAttribArray(L),m.bindBuffer(m.ARRAY_BUFFER,y),m.vertexAttribPointer(D,3,m.FLOAT,!1,0,0),m.enableVertexAttribArray(D),m.bindBuffer(m.ARRAY_BUFFER,U),m.vertexAttribPointer(C,2,m.FLOAT,!1,0,0),m.enableVertexAttribArray(C),m.bindBuffer(m.ELEMENT_ARRAY_BUFFER,B),mr.forEach((function(r){n(Q),o(Q,Q,r.position),i(Q,Q,[r.radius,r.radius,r.radius]),m.uniformMatrix4fv(I,!1,Q),m.uniform4fv(V,r.color),m.uniform1i(k,1),m.uniform1i(X,0),m.drawElements(m.TRIANGLES,w.indices.length,m.UNSIGNED_SHORT,0)})),requestAnimationFrame(e)}()}else console.error("WebGL not supported");function _r(r){var t=1/r;return 1.5*Math.pow(t,1/3)}function gr(r){var t=1/r;return 1.5*Math.pow(t,1/3)}function Rr(){var r,t,n,o,i=[0,0,-1],a=e(),u=e();r=a,t=or,n=Math.sin(t),o=Math.cos(t),r[0]=o,r[1]=0,r[2]=-n,r[3]=0,r[4]=0,r[5]=1,r[6]=0,r[7]=0,r[8]=n,r[9]=0,r[10]=o,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,function(r,t){var e=Math.sin(t),n=Math.cos(t);r[0]=1,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=n,r[6]=e,r[7]=0,r[8]=0,r[9]=-e,r[10]=n,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1}(u,ir);var s=e();return function(r,t,e){var n=t[0],o=t[1],i=t[2],a=t[3],u=t[4],s=t[5],f=t[6],c=t[7],l=t[8],d=t[9],h=t[10],m=t[11],v=t[12],A=t[13],_=t[14],g=t[15],R=e[0],E=e[1],p=e[2],x=e[3];r[0]=R*n+E*u+p*l+x*v,r[1]=R*o+E*s+p*d+x*A,r[2]=R*i+E*f+p*h+x*_,r[3]=R*a+E*c+p*m+x*g,R=e[4],E=e[5],p=e[6],x=e[7],r[4]=R*n+E*u+p*l+x*v,r[5]=R*o+E*s+p*d+x*A,r[6]=R*i+E*f+p*h+x*_,r[7]=R*a+E*c+p*m+x*g,R=e[8],E=e[9],p=e[10],x=e[11],r[8]=R*n+E*u+p*l+x*v,r[9]=R*o+E*s+p*d+x*A,r[10]=R*i+E*f+p*h+x*_,r[11]=R*a+E*c+p*m+x*g,R=e[12],E=e[13],p=e[14],x=e[15],r[12]=R*n+E*u+p*l+x*v,r[13]=R*o+E*s+p*d+x*A,r[14]=R*i+E*f+p*h+x*_,r[15]=R*a+E*c+p*m+x*g}(s,u,a),function(r,t,e){var n=t[0],o=t[1],i=t[2],a=e[3]*n+e[7]*o+e[11]*i+e[15];a=a||1,r[0]=(e[0]*n+e[4]*o+e[8]*i+e[12])/a,r[1]=(e[1]*n+e[5]*o+e[9]*i+e[13])/a,r[2]=(e[2]*n+e[6]*o+e[10]*i+e[14])/a}(i,i,s),i}}})();